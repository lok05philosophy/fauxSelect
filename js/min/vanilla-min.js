!function($){$.fn.fauxSelect=function(e){var t=$.extend({},$.fn.fauxSelect.defaultParameters,e);return this.each(function(){function e(){for(var e="transform WebkitTransform MozTransform OTransform msTransform".split(" "),t=document.createElement("div"),s=0;s<e.length;s++)if(t&&void 0!==t.style[e[s]])return e[s];return!1}var s=0,i={fOptions:[],fInput:"",touchedTimer:null};i.setMarkup=function(){if(this.wrap('<div class="fauxEl"/>'),this.fEl=this.parent(),this.data("class"))for(var e=this.data("class").split(" "),s=0;s<e.length;s++)this.fEl.addClass(e[s]);this.before('<div class="fauxWrapper"/>'),this.fWrapper=this.fEl.find(".fauxWrapper"),this.fWrapper.append('<div class="fauxSelect"/>'),this.fSelect=this.fEl.find(".fauxSelect"),this.children("option:selected")[0]&&(this.initClick=this.children("option:selected").index()),this.createOptions(),t.defaultOption&&this.setHeader(t.defaultOption),t.arrow&&(this.before('<div class="fauxArrow"/>'),this.fArrow=this.fEl.find(".fauxArrow"))},i.createOptions=function(){var i=this;this.children().each(function(a){var o=$(this).text(),r=$(this).data("class")?$(this).data("class").split(" "):[];if($(this).attr("disabled")&&r.push("fauxDisabled"),t.optionCharReplace&&o.indexOf(t.optionCharReplace[0])>-1){for(var n=t.optionCharReplace[0],f=t.optionCharReplace[1]||"span",l=0,c=o,h=new RegExp(n,"g");o.indexOf(t.optionCharReplace[0])>-1;){var u;l%2===0?(u="<"+f+">",o=o.replace(n,u)):(u="</"+f+">",o=o.replace(n,u)),l++}l%2!==0&&(o=o+"</"+f+">"),$(this).text(c.replace(h,""))}if(i.fSelect.append('<div class="fauxOption">'+o+"</div>"),r)for(var d=0;d<r.length;d++)i.fEl.find(".fauxOption").eq(a).addClass(r[d]);e||(this.animationDuration=parseInt($(this).css("transition-duration"),10)||200),i.fOptions[a]=i.fEl.find(".fauxOption").eq(a),"ontouchstart"in document.documentElement||$(this).hide(),s++})},i.setHeader=function(e){var t="";switch(this.fWrapper.prepend('<div class="fauxHead"/>'),this.fHead=this.fWrapper.find(".fauxHead"),e){case"data":var s=this.data("placeholder");if(!s)return void console.log("Please add data-placeholder to your select");t=s,this.fHead.text(t);break;case"label":var i=this.attr("id"),a=$('label[for="'+i+'"]');if(!a[0])return void console.log("No label for select available");t=a.html(),this.fHead.html(t),a.hide();break;default:return void console.log("Currently no support for this Header Type.")}},i.clear=function(){this.fEl.removeClass("selected"),this.fSelect.children().removeClass("chosen").each(function(e){$(this).css("z-index",s-e)}),this.children().removeProp("selected"),this.close()},i.expand=function(){this.fEl.addClass("open");var s=0;t.defaultOption&&(s+=this.fHead.outerHeight(!0)),$.each(this.fOptions,function(){e?this.css("top",s):this.animate({top:s},this.animationDuration),s+=this.outerHeight(!0)}),t.maxHeight&&s>t.maxHeight?this.fWrapper.css("height",t.maxHeight):this.fWrapper.css("height",s),this.trigger("faux-expand",[this,s])},i.choose=function(e){this.fSelect.children().removeClass("fauxHover").eq(e).addClass("chosen").css("z-index",s+1).siblings().each(function(){$(this).removeClass("chosen").css("z-index",$(this).index())}),this.children().eq(e).prop("selected","selected").siblings().removeProp("selected"),this.close(),this.fEl.addClass("selected"),this.trigger("faux-choose",[this,e])},i.close=function(){$.each(this.fOptions,function(){this.removeClass("fauxHover"),e?this.css("top",0):this.animate({top:0},this.animationDuration)}),this.fWrapper.removeAttr("style"),this.fEl.removeClass("open"),this.trigger("faux-close",[this])},i.fauxScroller=function(){var e=this.fSelect.children(".fauxHover"),s=t.defaultOption?this.fHead.outerHeight(!0):0,i={top:e.offset().top,bot:e.offset().top+e.outerHeight(!0)},a={top:this.fWrapper.offset().top+s,bot:this.fWrapper.offset().top+this.fWrapper.innerHeight()-s},o=this.fWrapper.scrollTop(),r;i.bot>a.bot?r=o+(i.bot-a.bot):i.top<a.top&&(r=o-(a.top-i.top)),this.fWrapper.animate({scrollTop:r},50)},i.fauxFocus=function(){var e=this;$(window).keydown(function(s){if(e.is(":focus"))switch(s.keyCode){case 40:e.fInput="",e.fEl.hasClass("open")?e.fSelect.children(".fauxHover")[0]?(e.fSelect.children(".fauxHover").next()&&e.fSelect.children(".fauxHover").next().addClass("fauxHover").siblings().removeClass("fauxHover"),t.maxHeight&&e.fauxScroller()):e.fSelect.children().eq(0).addClass("fauxHover"):e.expand();break;case 38:e.fInput="",e.fEl.hasClass("open")&&(e.fSelect.children(".fauxHover").prev()&&e.fSelect.children(".fauxHover").prev().addClass("fauxHover").siblings().removeClass("fauxHover"),t.maxHeight&&e.fauxScroller());break;case 13:if(e.fSelect.children().hasClass("fauxHover")){var i=e.fSelect.children(".fauxHover").index();e.choose(i)}break;case 9:e.close();break;case 27:e.close();break;default:e.focusTyper(s.keyCode)}})},i.focusTyper=function(e){this.fInput+=String.fromCharCode(e);var s=this,i=this.fInput.toLowerCase(),a=!0;$.each(this.fOptions,function(){var e=this.text().toLowerCase();e.indexOf(i)>-1&&a&&(a=!1,this.addClass("fauxHover").siblings().removeClass("fauxHover"),t.maxHeight&&s.fauxScroller(),s.fEl.hasClass("open")||this.click())}),clearTimeout(s.touchedTimer),this.trigger("faux-typing",[this,i])},i.init=function(){var e=this;this.setMarkup(),t.arrow&&this.fArrow.click(function(){e.fEl.hasClass("open")?e.close():e.expand()}),this.focus(function(){e.fEl.addClass(t.fauxFocusClass)}),this.blur(function(){this.fInput="",e.fEl.removeClass(t.fauxFocusClass)}),this.fauxFocus(),this.fEl.click(function(){e.focus()}),$(window).keyup(function(){clearTimeout(e.touchedTimer),e.touchedTimer=setTimeout(function(){e.fInput=""},1250)}),this.fSelect.children().each(function(t){$(this).css("z-index",s-t),$(this).click(function(){var t=$(this).index();e.fEl.hasClass("open")?$(this).hasClass("fauxDisabled")?e.close():e.choose(t):""===e.fInput?e.expand():e.choose(t)})}),this.fHead.click(function(){e.fEl.hasClass("open")?e.clear():e.expand()}),$(window).mouseup(function(t){e.fEl.is(t.target)||0!==e.fEl.has(t.target).length||e.close()}),$(window).load(function(){e.trigger("faux-initialized",[e,t]),e.initClick&&e.choose(e,e.initClick)})};var a=$.extend({},$(this),i);a.init()})},$.fn.fauxSelect.defaultParameters={defaultOption:!1,arrow:!1,optionCharReplace:!1,maxHeight:!1,fauxFocusClass:"fauxFocus"}}(jQuery);