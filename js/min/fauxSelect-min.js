!function($){$.fn.fauxSelect=function(e){var t=$.extend({},$.fn.fauxSelect.defaultParameters,e);return this.each(function(){function e(){for(var e="transform WebkitTransform MozTransform OTransform msTransform".split(" "),t=document.createElement("div"),s=0;s<e.length;s++)if(t&&void 0!==t.style[e[s]])return e[s];return!1}var s=0,i={fOptions:[],setMarkup:function(){if(this.wrap('<div class="fauxEl"/>'),this.fEl=this.parent(),t.maxHeight&&this.fEl.addClass("maxHeight"),this.data("class"))for(var e=this.data("class").split(" "),s=0;s<e.length;s++)this.fEl.addClass(e[s]);this.before('<div class="fauxWrapper"/>'),this.fWrapper=this.fEl.find(".fauxWrapper"),this.fWrapper.append('<div class="fauxSelect"/>'),this.fSelect=this.fEl.find(".fauxSelect"),this.children("option:selected")[0]&&(this.initClick=this.children("option:selected").index()),this.createOptions(),t.defaultOption?this.setHeader(t.defaultOption):(this.fWrapper.prepend('<div class="fauxDropper"/>'),this.fDropper=this.fWrapper.find(".fauxDropper")),t.arrow&&(this.before('<div class="fauxArrow"/>'),this.fArrow=this.fEl.find(".fauxArrow"))},setHeader:function(e){var t;switch(this.fWrapper.prepend('<div class="fauxHead"/>'),this.fHead=this.fWrapper.find(".fauxHead"),e){case"data":if(!this.data("placeholder"))return void console.log("Please add data-placeholder to your select");t=this.data("placeholder"),this.fHead.text(t);break;case"label":var s=this.attr("id"),i=$('label[for="'+s+'"]');t=i.html(),this.fHead.html(t),i.hide();break;default:return}},createOptions:function(){var e=this;this.children().each(function(i){var a=$(this).text(),r=$(this).data("class")?$(this).data("class").split(" "):[];if($(this).attr("disabled")&&r.push("fauxDisabled"),t.optionCharReplace&&a.indexOf(t.optionCharReplace[0])>-1){for(var o=t.optionCharReplace[0],f=t.optionCharReplace[1],n=0;a.indexOf(t.optionCharReplace[0])>-1;){var l;n%2===0?(l="<"+f+">",a=a.replace(o,l)):(l="</"+f+">",a=a.replace(o,l)),n++}n%2!==0&&(a=a+"</"+f+">")}var h=$(this).data("href")?$(this).data("href"):null,c=$(this).data("target")?' target="'+$(this).data("target")+'"':"",d;if(h?(d='<a href="'+h+'"',d+=c,d+="></a>"):d="",e.fSelect.append('<div class="fauxOption">'+a+d+"</div>"),r)for(var p=0;p<r.length;p++)e.fEl.find(".fauxOption").eq(i).addClass(r[p]);e.fOptions[i]=e.fEl.find(".fauxOption").eq(i),$(this).hide(),s++})},expand:function(){this.fEl.addClass("open");var s=0;t.defaultOption&&(s+=this.fHead.outerHeight(!0)),$.each(this.fOptions,function(){if(e)this.css("top",s);else{var t=parseInt(this.css("transition-duration"),10)||250;this.animate({top:s},t)}s+=this.outerHeight(!0)}),t.maxHeight&&(s>t.maxHeight?this.fWrapper.css("height",t.maxHeight):this.fWrapper.css("height",s)),this.trigger("faux-expand",[this,s])},choose:function(e,i,a){if(e.children().eq(i).data("href")){var r=t.defaultOption?e.fHead:e.fDropper;e.fEl.removeClass("selected"),r.css("z-index",s+2),e.fSelect.children().each(function(){$(this).removeClass("chosen").css("z-index","auto")}),e.children().removeProp("selected"),e.close()}else e.fSelect.children().removeClass("fauxHover").eq(i).addClass("chosen").css("z-index",s+1).siblings().each(function(){$(this).removeClass("chosen").css("z-index",$(this).index())}),e.children().eq(i).prop("selected","selected").siblings().removeProp("selected"),e.fEl.addClass("selected");a||e.close(),this.trigger("faux-choose",[this,i])},close:function(){var s=this;$.each(this.fOptions,function(){if(e)this.css("top",0);else{var t=parseInt(this.css("transition-duration"),10)||250;this.animate({top:0},t)}}),this.fEl.removeClass("open"),t.focusExpander&&(this.fSelect.children().removeClass("fauxHover"),this.fInput=""),t.maxHeight&&s.fWrapper.removeAttr("style"),this.trigger("faux-close",[this])},fauxScroller:function(){var e=this.fSelect.children(".fauxHover").offset().top+this.fSelect.children(".fauxHover").innerHeight(),s=this.fWrapper.offset().top+this.fWrapper.innerHeight();if(s=t.defaultOption?s-this.fHead.innerHeight():s,e>s){var i=e-s,a=this.fWrapper.scrollTop();this.fWrapper.animate({scrollTop:a+i},100)}var r=this.fSelect.children(".fauxHover").offset().top,o=this.fWrapper.offset().top;if(o=t.defaultOption?o+this.fHead.innerHeight():o,o>r){var f=o-r,n=this.fWrapper.scrollTop();this.fWrapper.animate({scrollTop:n-f},100)}},fauxFocus:function(){var e=this;$(window).keydown(function(s){if(e.is(":focus"))switch(s.keyCode){case 40:e.fInput="",e.fEl.hasClass("open")?e.fSelect.children(".fauxHover")[0]?(e.fSelect.children(".fauxHover").next()&&e.fSelect.children(".fauxHover").next().addClass("fauxHover").siblings().removeClass("fauxHover"),t.maxHeight&&e.fauxScroller()):e.fSelect.children().eq(0).addClass("fauxHover"):e.expand();break;case 38:e.fInput="",e.fEl.hasClass("open")&&(e.fSelect.children(".fauxHover").prev()&&e.fSelect.children(".fauxHover").prev().addClass("fauxHover").siblings().removeClass("fauxHover"),t.maxHeight&&e.fauxScroller());break;case 13:if(e.fSelect.children().hasClass("fauxHover")){var i=e.fSelect.children(".fauxHover").index();e.choose(e,i)}return!1;case 9:e.close();break;case 27:e.close();break;default:e.focusTyper(s.keyCode)}})},focusTyper:function(e){this.fInput+=String.fromCharCode(e);var t=this,s=this.fInput.toLowerCase(),i=!0;$.each(this.fOptions,function(){var e=this.text().toLowerCase();e.indexOf(s)>-1&&i&&(i=!1,this.addClass("fauxHover").siblings().removeClass("fauxHover"),t.fauxScroller(),t.fEl.hasClass("open")||this.click())}),clearTimeout(t.touchedTimer),this.trigger("faux-typing",[s])},initialize:function(){this.setMarkup();var e=this,i=t.defaultOption?this.fHead:this.fDropper;i.css("z-index",s+2).click(function(){e.fEl.hasClass("open")?(e.fSelect.children().removeClass("chosen").css("z-index","auto"),e.fEl.removeClass("selected"),e.children().removeProp("selected"),e.close()):e.expand()}),this.fEl.find(".fauxArrow")[0]&&this.fArrow.click(function(){e.fEl.hasClass("open")?e.close():e.expand()}),$(window).mouseup(function(t){e.fEl.is(t.target)||0!==e.fEl.has(t.target).length||e.close()}),$(window).keydown(function(t){27===t.keyCode&&e.fEl.hasClass("open")&&e.close()}),this.fSelect.children().each(function(t){$(this).css("z-index",s-t),$(this).click(function(){var t=$(this).index();e.fEl.hasClass("open")&&""===e.fInput&&!$(this).hasClass("fauxDisabled")?e.choose(e,t):e.fEl.hasClass("open")||""!==e.fInput?e.fEl.hasClass("open")&&""!==e.fInput&&!$(this).hasClass("fauxDisabled")&&e.choose(e,t):e.expand(),""===e.fInput||$(this).hasClass("fauxDisabled")||e.choose(e,t,!0),$(this).hasClass("fauxDisabled")&&(e.fSelect.children().removeClass("chosen").css("z-index","auto"),e.fEl.removeClass("selected"),e.children().removeProp("selected"),e.close())})}),t.focusExpander&&(this.touchedTimer=null,this.fInput="",this.fauxFocus(),this.blur(function(){this.fInput=""}),$(window).keyup(function(){clearTimeout(e.touchedTimer),e.touchedTimer=setTimeout(function(){e.fInput=""},1250)}),this.fEl.click(function(){e.focus()})),$(window).load(function(){e.trigger("faux-initialized",[e,t]),e.initClick&&e.choose(e,e.initClick)})}},a=$.extend({},$(this),i);a.initialize()})},$.fn.fauxSelect.defaultParameters={defaultOption:!1,arrow:!1,optionCharReplace:!1,focusExpander:!0,maxHeight:!1}}(jQuery);